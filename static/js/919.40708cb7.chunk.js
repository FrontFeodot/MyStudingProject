"use strict";(self.webpackChunkmy_studing_project=self.webpackChunkmy_studing_project||[]).push([[919],{8919:function(s,e,a){a.r(e),a.d(e,{default:function(){return F}});var n=a(2791),i=a(8687),r=a(7781),t=a(8683),g=a(6871),o=a(184),l=function(s){return{isAuth:s.auth.isAuth}},d=a(8649),u=a(5987),c={dialogs:"Dialogs_dialogs__XZOqL",dialog:"Dialogs_dialog__AFixY",active:"Dialogs_active__b1X9k",messages:"Dialogs_messages__gPRQ9",img:"Dialogs_img__9b5DG"},m=a(3504);var h=function(s){var e="/dialogs/"+s.id;return(0,o.jsx)("div",{className:c.dialog+" "+c.active,children:(0,o.jsxs)(m.OL,{to:e,onClick:function(){s.getDialogsWithFriend(s.id),s.startChatting(s.id)},children:[(0,o.jsx)("img",{className:c.img,src:s.img,alt:"".concat(s.name,"'s avatar")}),s.name]})})};var j=function(s){return(0,o.jsx)("div",{children:s.message})},x=a(5705),M=a(7942),f=a(6432),v=a(8218),p=a(9479),_=function(s){var e=(0,x.TA)({initialValues:{newMessageBody:""},validationSchema:M.Ry({newMessageBody:M.Z_().max(300,"Too much message")}),onSubmit:function(e){s.sendMessage(e.newMessageBody,s.userIdForMessage)}});return(0,o.jsx)(x.J9,{initialValues:e.initialValues,onSubmit:e.handleSubmit,className:f.Z.messageForm,children:(0,o.jsxs)(x.l0,{children:[(0,o.jsx)("div",{className:e.errors.newMessageBody&&e.touched.newMessageBody&&f.Z.error,children:(0,o.jsxs)("div",{className:f.Z.messageForm,children:[(0,o.jsx)(v.g,{className:f.Z.messageFormArea,name:"newMessageBody",id:"newMessageBody",placeholder:"Enter your message",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.newMessageBody}),e.errors.newMessageBody&&e.touched.newMessageBody&&(0,o.jsx)("span",{children:e.errors.newMessageBody})]})}),(0,o.jsx)(p.z,{"aria-label":"Submit",className:"p-button-success",label:"Send message",type:"submit"}),s.responseMessage?(0,o.jsx)("span",{className:f.Z.error,children:s.responseMessage}):null]})})},D=["getAllDialogs"],y=function(s){var e,a,i=s.getAllDialogs,r=(0,u.Z)(s,D);return(0,n.useEffect)((function(){i()}),[i]),e=r.interlocutors?r.interlocutors.map((function(s,e){return(0,o.jsx)(h,{name:s.userName,id:s.id,img:s.photos.large,getDialogsWithFriend:r.getDialogsWithFriend,startChatting:r.startChatting},e)})):(0,o.jsx)("span",{children:"No friends"}),a=r.messagesData&&r.messagesData[0]?r.messagesData.map((function(s,e){return(0,o.jsx)(j,{id:s.id,message:s.message},e)})):(0,o.jsx)("span",{children:"No messages"}),r.isAuth?(0,o.jsxs)("div",{className:c.dialogs,children:[(0,o.jsx)("div",{className:c.dialogsElements,children:e}),(0,o.jsxs)("div",{className:c.messages,children:[(0,o.jsx)("div",{children:a}),(0,o.jsx)("div",{}),(0,o.jsx)(_,{sendMessage:r.sendMessage,userIdForMessage:r.userIdForMessage,responseMessage:r.responseMessage})]})]}):(0,o.jsx)(g.Fg,{to:"/Login"})},F=(0,r.qC)((function(s){return(0,i.$j)(l)((function(e){return e.isAuth?(0,o.jsx)(s,(0,t.Z)({},e)):(0,o.jsx)(g.Fg,{to:"/login"})}))}),(0,i.$j)((function(s){return{interlocutors:s.messagesPage.interlocutors,messagesData:s.messagesPage.messagesData,userIdForMessage:s.messagesPage.userIdForMessage,responseMessage:s.messagesPage.responseMessage}}),{getDialogsWithFriend:d.u1,getAllDialogs:d.Y6,sendMessage:d.bG,startChatting:d.fJ}))(y)}}]);
//# sourceMappingURL=919.40708cb7.chunk.js.map